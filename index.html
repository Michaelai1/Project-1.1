<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cornerstone Advertising â€” Contact Form Mock</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="container header-content">
        <div class="brand">
          <img src="./logo.png" class="brand-logo" alt="Cornerstone Advertising" />
        </div>
        <nav class="nav">
          <a href="#">Our Expertise</a>
          <a href="#">Our Team</a>
          <a href="#">Our Clients</a>
          <a href="#">Resources</a>
          <a class="cta" href="#">Talk to Us</a>
        </nav>
      </div>
    </header>

    <main class="page container">
      <section class="form-section">
        <h1 class="visually-hidden">Contact Us</h1>
        <form
          id="contactForm"
          class="contact-form"
          action="https://michaelcarey.app.n8n.cloud/webhook/7e337509-3548-4b04-9023-be449b09c2d4"
          method="post"
          accept-charset="UTF-8"
          novalidate
        >
          <div class="form-row">
            <label for="contact_name">Full Name <span class="required" aria-hidden="true">*</span></label>
            <input id="contact_name" name="contact_name" type="text" autocomplete="name" required />
          </div>

          <div class="form-row">
            <label for="contact_email">Work Email <span class="required" aria-hidden="true">*</span></label>
            <input id="contact_email" name="contact_email" type="email" autocomplete="email" required />
          </div>

          <div class="form-row">
            <label for="contact_phone">Phone Number</label>
            <input id="contact_phone" name="contact_phone" type="tel" placeholder="(555) 555-1234" autocomplete="tel" />
          </div>

          <div class="form-row">
            <label for="company">Company</label>
            <input id="company" name="company" type="text" autocomplete="organization" placeholder="Your Company, Inc." />
          </div>

          <div class="form-row">
            <label for="company_website">Company Website</label>
            <input id="company_website" name="company_website" type="url" placeholder="https://yourcompany.com" />
          </div>

          <div class="form-row">
            <label for="industry">Primary Service / Industry</label>
            <select id="industry" name="industry">
              <option value="HVAC">HVAC</option>
              <option value="Plumbing">Plumbing</option>
              <option value="Electrical">Electrical</option>
              <option value="Roofing">Roofing</option>
              <option value="Landscaping">Landscaping</option>
              <option value="Marketing">Marketing</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div class="form-row hidden" id="industry_other_row">
            <label for="industry_other">Please specify</label>
            <input id="industry_other" name="industry_other" type="text" />
          </div>

          <div class="form-row">
            <label for="service_area">Main Service Area</label>
            <input id="service_area" name="service_area" type="text" placeholder="City, State" />
          </div>

          <div class="form-row">
            <label for="service_type">How can we help?</label>
            <select id="service_type" name="service_type">
              <option>Marketing &amp; Advertising</option>
              <option>Website Design &amp; Management</option>
              <option>Broadcast TV / Web Video</option>
              <option>Social Media Strategy</option>
              <option>Traditional (Print) Advertising</option>
            </select>
          </div>

          <div class="form-row">
            <label for="how_can_we_help">Biggest Challenge or Goal</label>
            <textarea id="how_can_we_help" name="how_can_we_help" rows="4" placeholder="Briefly describe your challenge or goal"></textarea>
          </div>

          <div class="form-row">
            <label class="checkbox">
              <input id="consent" name="consent" type="checkbox" required />
              <span>I agree to be contacted about services.</span>
            </label>
          </div>

          <div class="actions">
            <button class="submit-btn" type="submit">Submit</button>
          </div>
        </form>

        <aside class="form-art" aria-label="Decorative imagery">
          <img src="./aside.png" alt="Cornerstone sample image" class="art primary" />
        </aside>
      </section>
    </main>
    <script>
      const emailInput = document.getElementById('contact_email');
      const websiteInput = document.getElementById('company_website');
      const industrySelect = document.getElementById('industry');
      const industryOtherRow = document.getElementById('industry_other_row');
      const industryOtherInput = document.getElementById('industry_other');

      const freeEmailDomains = new Set([
        'gmail.com','yahoo.com','outlook.com','hotmail.com','icloud.com','aol.com','proton.me','protonmail.com','live.com','msn.com','mail.com','yandex.com','me.com','pm.me'
      ]);

      function validateEmailDomain() {
        const value = emailInput.value.trim();
        const at = value.lastIndexOf('@');
        if (at === -1) {
          emailInput.setCustomValidity('Please enter a valid work email.');
          return;
        }
        const domain = value.slice(at + 1).toLowerCase();
        if (freeEmailDomains.has(domain)) {
          emailInput.setCustomValidity('Please use your work email (no free email domains).');
        } else {
          emailInput.setCustomValidity('');
        }
      }

      function validateWebsiteScheme() {
        const value = websiteInput.value.trim();
        if (!value) { websiteInput.setCustomValidity(''); return; }
        if (/^https?:\/\//i.test(value)) {
          websiteInput.setCustomValidity('');
        } else {
          websiteInput.setCustomValidity('Website must start with http:// or https://');
        }
      }

      function handleIndustryOther() {
        if (industrySelect.value === 'Other') {
          industryOtherRow.classList.remove('hidden');
          industryOtherInput.required = true;
        } else {
          industryOtherRow.classList.add('hidden');
          industryOtherInput.required = false;
          industryOtherInput.value = '';
        }
      }

      emailInput.addEventListener('input', validateEmailDomain);
      websiteInput.addEventListener('input', validateWebsiteScheme);
      industrySelect.addEventListener('change', handleIndustryOther);

      const form = document.getElementById('contactForm');
      form.addEventListener('submit', async (e) => {
        validateEmailDomain();
        validateWebsiteScheme();
        handleIndustryOther();
        if (!form.checkValidity()) {
          e.preventDefault();
          form.reportValidity();
          return;
        }

        e.preventDefault();
        const payload = {
          contact_name: form.contact_name.value.trim(),
          contact_email: form.contact_email.value.trim(),
          contact_phone: form.contact_phone.value.trim(),
          company: form.company.value.trim(),
          company_website: form.company_website.value.trim(),
          industry: form.industry.value,
          industry_other: form.industry_other.value.trim(),
          service_area: form.service_area.value.trim(),
          service_type: form.service_type.value,
          how_can_we_help: form.how_can_we_help.value.trim(),
          consent: form.consent.checked,
          user_agent: navigator.userAgent,
          page_url: location.href,
        };

        try {
          const res = await fetch(form.action, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload),
          });
          if (!res.ok) throw new Error(`Request failed: ${res.status}`);
          alert('Thanks! Your information was submitted.');
          form.reset();
          handleIndustryOther();
        } catch (err) {
          console.error(err);
          alert('Sorry, there was a problem submitting the form. Please try again.');
        }
      });
    </script>
  </body>
  
</html>


